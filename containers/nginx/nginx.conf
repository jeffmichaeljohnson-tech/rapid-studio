events {}

http {
    upstream orchestrator {
        server orchestrator:8000;
    }

    upstream assets_api {
        server assets-api:8080;
    }

    upstream grafana {
        server grafana:3000;
    }

    server {
        listen 80;

        # Orchestrator API
        location /api/orchestrator/ {
            proxy_pass http://orchestrator/;
        }

        # Assets API
        location /api/assets/ {
            proxy_pass http://assets_api/;
        }

        # Grafana UI
        location /grafana/ {
            proxy_pass http://grafana/;
        }

        # Default health check
        location / {
            return 200 'NGINX Gateway is running\n';
            add_header Content-Type text/plain;
        }
    }
}

